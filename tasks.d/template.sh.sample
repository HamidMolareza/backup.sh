#!/usr/bin/env bash
# Template for a task script in tasks.d (ignored if *.sample)
# The main runner exports:
#   TMP_BACKUP_DIR      -> write your artifacts here
#   NON_INTERACTIVE     -> "1" for non-interactive mode
#   WAIT_TO_PRESS_ENTER -> helper function

set -uo pipefail

# Example: check dependency (log-only if missing)
if ! command -v dconf >/dev/null 2>&1; then
  echo "dconf not found, skipping template task." >&2
  exit 0
fi

task_dir="$TMP_BACKUP_DIR/example-task"
mkdir -p "$task_dir"

# Do work
echo "Hello from template" > "$task_dir/readme.txt"

# If you create helper restore scripts, make them executable:
cat <<'RESTORE' > "$task_dir/restore.sh"
#!/usr/bin/env bash
echo "Example restore step"
RESTORE
chmod +x "$task_dir/restore.sh"

# Exit 0 even if partial failuresâ€”let the main script log/continue
exit 0
